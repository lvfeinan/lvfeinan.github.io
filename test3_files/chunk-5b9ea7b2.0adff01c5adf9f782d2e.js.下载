(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b9ea7b2"],{"570d":function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAABGdBTUEAALGPC/xhBQAABXVJREFUWAnNmWFMHFUQgGf2DrjbI1EEWzlTNKn+qI02kRoTTU0FWjTagk1aU/WPf/zVNKmxPYEftWmgVAtN9I+Nf4w/jImpFmqCRSCpUdNqS6PRf0WMsaAWtLHcHne3t+PMHXssx+3dLtwCL7l7b9+bN/Pt3Ozbee8Qllme7aK7k6jtMgi2IkEYkD+ZuoZVT3N7ghAmEGASEUZ9ATh/4VBocjlmWZf70tCr3avMGvuJsIVnP0FAimMtiMQ3d5mrPj/6PvmyLfib47lzgq6gW0/TnbdjsTYiOghAAbfGcuURMAFI76vloePn38Cp3HG7a0fQr52hsrGp2EFCo4N/7io7ZUvtZ4j/SMG36+5Rez58FWeL6SkKLTGbgOhZIthWTNlyx9nzVxQ/tHwVCU0U0lUQurEz/gih3gdE9xdSUsoxBp8kP7aORNTv7fTaPkCNJ2aeIdC/XUlggeSHuhZ0utjUpe2xg87r6abu+MNGSv+OVVTaTfS+H2f9iNsH29XLubYWeXrXKaoxDL1/dYEFkwIpos9leS0ILatENB49u9IhkQtlXqdDZZb69vZS0OyTeoGnf52KHeC+p6wCq94mqp+Oa0esHNmYbuqmO8iIjvHSVm0VWBttnPGXqxsHD+PfwpP1NKW0yNoEFkyqTCW0o9KSkvZ08+lobTIGYxzLC2InI+Lp99dMcIPXuf1FrSAmK/y+TQNHAmNpTydj+OKKAyP2Vz8Y2jHSXvmSAnisKDRRWUJPvSxyaWgEQ7K1lSsC/IC699N9nDBxGeoIvQWonCoKQJDmVJp76S6OEs/ziixQDrDZryjGkNm2q3kJfHRnj7ZBSSWiz3Oq6bMTLGm/DXBzd3wzGfCRE1t6AloUFq53IrxsmQLAupEc4ZVrnRMbaFA9xzSGnQgvS6ZEwMLAW7ewwnfoCppTx3Fepm46vokSAmdsUljhhbrWBcDghrD6UAWENjP4z0XnlRyY44KdrPAuU3bNxQvCcF2t2iLboYF2vMngDQz+i+1ED4DFFiFWSUxP2xq2DPgAe637tznwp/N63CNgwUGifxV+hRbcj5ncKYCuxi5akExZPD4fKh4CC4ucoSh8gOIIml/zWwi04YLgHgNnHIgTHB7kDDp9m/bgCKHt1ldzxgCAvDjcrMPmPLuaF45JhoZRO4G8/TYeH27HaTOXMOeVGlj08vnUVYYOfYGIHLIuig24VYMXwGn9PuxTxEOciHxjNeioXQDcK2B27rWhN4O/S3hwUc5lapffecC9AhYyXjn6pE7vXHacjIZTKbi+5I0A4o+hcrUpoSfWl/KhE8D5gnqZ4tt0oS1wPe1pOTvjV+O78wIuW+zxaFwb11P6qNNszaUFce8HAizz5sIDoFINdrPb/3GtLDuBKvnZKM9elrSBM0jqMVNlFvrcIbzFW55Oc2At1QzZM9yBf5lMWWjp2FgdfI9TT/crianNg5p5RquC6kmr6vSDaO2Q8+g4aT/ws3qftX9V2oh/VvjwsYGI+ofV/gJPy4AkQQj+3bwmRq2CK91m+3HFhy/kAgvHImjpHO6o+IkH9q0WuADzcvHKUES9JDy5ZVF4WAWau2e26Ab28269ztrvaZtDQjxsByy2C0KLwM53aJ2e1D7jF8+Tcu1pQbzKMdyaLySsdvOGh1VATio55WzgvDvC/besYyVrI9zmkDhaHVC3FQMWm0U9bQV77gRVzUKU/5bDAxwyFdaxJbX5UJG9dkYpU4+bx7hO9LiCNhXK0VQqbvBJJ7bydu1xfhMW/cXMuSD/2AJckeTH71c+HjwcHM+OOWwsCdqqu7GT1iNquznn2Mq/W+Z/cT6WYKgaBOK0ACdkH8rXsk26ZgSwf+R19YZVh9v2/6VZcMLEbxR/AAAAAElFTkSuQmCC"},"7f0a":function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAABGdBTUEAALGPC/xhBQAABRJJREFUWAnVmU2IHEUUx1/1hJmdZDGH7G60HXIxqBCIYrK6hxyMeolgojdzEkFQWFECCgY9GhQUguCiJ6/eNEvAXFQ85LAxrmgg4EWQZXZMsht1cdbZmcxM+f7VXU13TVd/TM/Oknfp6qp67/2m5vWr6teCCsqtZ2fvbW/Rc1LKIySES5JcIumSoH3cvk0kGtxukJQNIcRyZYIuznxz9UYRt2IY5cYzxw70+p3TDHeKYeYkk2W1wxMl/7glVlksOeUv3W8vr2TV1fMyO4NC/enH9/Vl/11uzrPrsjYy9FVQh3UXHOGcq333I/8r2SQTtDxxolJvr5+RJN9h2L3ZTOeYJWhDkPiwVpk6Ly5daqdppkKrmG3R1ww8l2as6DiDL1Wq9EJazCdCN56ae6wne4sMXCsKlFWfweslUTrlfr/0s03HsQ2sHj96koEvjxMYLPAHv/BvY4tdaX+FAVy1KW53P694i1f8WNyKD6w0YtgPiR0DxoJgwcABHnOBItDIEm3voRtbDJtA4XuEiuJhrnB/BNpPa9YsIaq7aVftQFi/cBv2YNcmDD4HrvB4ENP+xvG7LQ+XDx2m6Q8+IWdykrZ+Xab1994iudkM28rVFnsmaer9j2nikSPUbzZp7eyb1Ll+Ld4G53HegB7QG1Cw0mqnS9g47jn9kgKGVTia/uhTguNhBHrQhx0IFgL2rcJc/k6spihonCX4bt6qxAO9f/6ODFcePjQUuAaGflhM++Exvz3vc5KCVoeflLPExhefUbdRj9jKC24Dhl3YTxTm8w5p/M+oiVI+n6jAg/2/btOtM68NDZ4EDLuwnyo+p/DOFrKR9XhZmt5PM+c/p11uNCu2f7tOa2+/HvtwpgH31m6m8mICZw1ZqQrX6bToZFZgKMJBnhUfFTB8gxMvHA43vEcYvRklK/gogQM0SUcdKei+oCNHIw3cmdmvsouZJfDQ4Z/KGhImEnjFyvHZn3jhc6+2NmaL8X6rRU41enwpCuz5FMucPfgltIDYVnx7gAEqXUe9NReAhmoA/udqrKXujUahkIgY5bd8hx/JDAkyohZ70/9vk/qbm7Fjvea/hPGRCPNyeHBdoqDoLFE++GCspcrBh4ba8mONMS/CoxC0BjazhOx2Iz7zbvkR5fAN83J4yKGhbcDIEjffeGXoLT/MONBmXgelqoGBDB1JwMjDd3hbz7NzZnCppoDXQW0Ne3pWJcxLA9YbR5BVCp4ONZs6ezCv4xVGxBU9kHbNCqztjBSca4Dg9Y6mQlzQTpKueYG1rdGBi0XYVNCoXnIWQTHQKmL3nkJniVRwtp8ozKc4eZKC9sutC0lKe19+lcy0lvcskQQO+ymyoMvCXniAnsutvNobNkWzdJAXWNu1gZv29Xx19d7Gz+m+ABqv5yi36gHz2rz4Fcmet2HcWfmj0FlCg8MOBHZh3ybg0uUDzAnqHrhRdeit9R9QIMG9KSX3fvWa1bn2C8lOahnZVB+4F+UKlQ8/St3VOvUshy0GXqpNTD0ZrltHoGHVr0dfRUlqwMuYOxi4zvXqWbNeHYSH5sEE1IdZoaX7duIK/+AwgcEyAI1OlFf5UPLiToHDL/zHlXnBNxAe6NRy130JADh+KWKKfzl/Qtt+gR/4s62wJogNDz2IK2JKPb1CnE3K42Gd3G183WL78BMXw6a9xPAwJ99V3xFN+OCLraqtySfyVKh4lTD9Cn+1vTCWL7YmPO5VXh/zt/H/AZG91yEKKC++AAAAAElFTkSuQmCC"},"8ddb":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"wxmyMatters"},[a("ul",{staticClass:"myMatters_nav",class:{fudan_matter_nav:t.fudanMatter,active:t.active}},[t.fudanMatter?a("li",{class:{active:"launch"==t.showRoute},on:{click:function(s){t.showRoute="launch"}}},[t.launchAtodoC.unlaunch&&0!=t.launchAtodoC.unlaunch?a("span",[t._v(t._s(t.launchAtodoC.unlaunch))]):t._e(),t._v("我的发起\n    ")]):t._e(),t._v(" "),t.showTodoTab?a("li",{class:{active:"todo"==t.showRoute},on:{click:function(s){t.showRoute="todo"}}},[t.launchAtodoC.untodo&&0!=t.launchAtodoC.untodo?a("span",[t._v(t._s(t.launchAtodoC.untodo))]):t._e(),t._v("\n      "+t._s(t.$t("system.myTask"))+"\n    ")]):t._e(),t._v(" "),t.showOverseeTab?a("li",{class:{active:"oversee"==t.showRoute},on:{click:function(s){t.showRoute="oversee"}}},[t._v("我的督办")]):t._e(),t._v(" "),t.showReadTab?a("li",{class:{active:"read"==t.showRoute},on:{click:function(s){t.showRoute="read"}}},[t._v("我的知会")]):t._e(),t._v(" "),a("img",{attrs:{src:e("343c"),alt:""},on:{click:t.search}})]),t._v(" "),t.showSearch?a("mSearch",{attrs:{type:t.showRoute,status:t.$refs[t.showRoute].status,showStatus:{showTodoTab:t.showTodoTab,showOverseeTab:t.showOverseeTab,showReadTab:t.showReadTab},searchData:t.searchData},on:{search:t.searchFn}}):t._e(),t._v(" "),"launch"==t.showRoute?a("mLaunch",{ref:"launch"}):t._e(),t._v(" "),"todo"==t.showRoute?a("mTodo",{ref:"todo"}):t._e(),t._v(" "),"oversee"==t.showRoute?a("mOversee",{ref:"oversee"}):t._e(),t._v(" "),"read"==t.showRoute?a("mRead",{ref:"read"}):t._e(),t._v(" "),a("mFooter")],1)},i=[],o=e("5530"),n=e("97d6"),c=e("c811"),r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"m_matterSearch"},[e("div",{staticClass:"matterSearchBg"},[e("div",{staticClass:"m_matterSearch_tab"},[e("el-radio-group",{on:{change:t.typeChange},model:{value:t.nowType,callback:function(s){t.nowType=s},expression:"nowType"}},[t._l(t.statusType,(function(s,a){return[t._v(t._s(a)+"\n          "),"launch"==a?e("el-radio",{attrs:{label:"launch"}},[t._v("我的发起")]):"todo"==a?e("el-radio",{attrs:{label:"todo"}},[t._v("我的任务")]):"oversee"==a?e("el-radio",{attrs:{label:"oversee"}},[t._v("我的督办")]):"read"==a?e("el-radio",{attrs:{label:"read"}},[t._v("我的知会")]):t._e()]}))],2)],1),t._v(" "),e("div",{staticClass:"m_matterSearch_tab search_tab2"},[e("el-radio-group",{model:{value:t.nowStatus,callback:function(s){t.nowStatus=s},expression:"nowStatus"}},t._l(t.statusType[t.nowType],(function(s){return e("el-radio",{key:s.status+t.type,attrs:{label:s.status}},[t._v(t._s(s.name))])})),1)],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showFn("keyword"),expression:"showFn('keyword')"}],staticClass:"m_matterSearch_list"},[e("span",{staticClass:"search_list_tit"},[t._v("服务名称")]),t._v(" "),e("span",{staticClass:"search_list_con"},[e("el-select",{attrs:{filterable:"",size:"mini",placeholder:"搜索服务名称"},model:{value:t.keyword,callback:function(s){t.keyword=s},expression:"keyword"}},t._l(t.appList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1)],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showFn("time_lower","time_lower"),expression:"showFn('time_lower','time_lower')"}],staticClass:"m_matterSearch_list"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.showFn("time_type"),expression:"showFn('time_type')"}],staticClass:"search_list_tit"},[e("el-select",{attrs:{size:"mini"},model:{value:t.time_type,callback:function(s){t.time_type=s},expression:"time_type"}},[e("el-option",{attrs:{label:"到达时间",value:0}}),t._v(" "),1!=t.nowStatus?e("el-option",{attrs:{label:"处理时间",value:1}}):t._e(),t._v(" "),e("el-option",{attrs:{label:"提交时间",value:2}})],1)],1),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.showFn("time_type"),expression:"!showFn('time_type')"}],staticClass:"search_list_tit"},[t._v("\n         提交时间\n      ")]),t._v(" "),e("span",{staticClass:"search_list_con"},[e("el-date-picker",{attrs:{type:"date",size:"mini",placeholder:"开始时间","value-format":"yyyy-MM-dd"},model:{value:t.time_lower,callback:function(s){t.time_lower=s},expression:"time_lower"}}),t._v(" "),e("span",{staticClass:"reduce"},[t._v("-")]),t._v(" "),e("el-date-picker",{attrs:{type:"date",size:"mini",placeholder:"结束时间","value-format":"yyyy-MM-dd"},model:{value:t.time_upper,callback:function(s){t.time_upper=s},expression:"time_upper"}})],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showFn("name_or_number"),expression:"showFn('name_or_number')"}],staticClass:"m_matterSearch_list"},[e("span",{staticClass:"search_list_tit"},[t._v("姓名/学工号")]),t._v(" "),e("span",{staticClass:"search_list_con"},[e("el-input",{attrs:{size:"mini",placeholder:"姓名/学工号"},model:{value:t.name_or_number,callback:function(s){t.name_or_number=s},expression:"name_or_number"}})],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showFn("department"),expression:"showFn('department')"}],staticClass:"m_matterSearch_list"},[e("span",{staticClass:"search_list_tit"},[t._v("发起人部门")]),t._v(" "),e("span",{staticClass:"search_list_con"},[e("departSearch",{ref:"departSearch",staticStyle:{"vertical-align":"bottom",height:"28px","line-height":"28px"},attrs:{id:t.department,placeholders:"搜索部门名称"},on:{"update:id":function(s){t.department=s}}})],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showFn("taskType"),expression:"showFn('taskType')"}],staticClass:"m_matterSearch_list"},[e("span",{staticClass:"search_list_tit"},[t._v("任务类型")]),t._v(" "),e("span",{staticClass:"search_list_con"},[e("el-select",{attrs:{size:"mini",placeholder:"任务类型"},model:{value:t.taskType,callback:function(s){t.taskType=s},expression:"taskType"}},t._l(t.taskList,(function(t){return e("el-option",{key:t.status,attrs:{label:t.name,value:t.status}})})),1)],1)]),t._v(" "),e("div",{staticClass:"m_matterSearchBtn"},[e("el-button",{attrs:{size:"small"},on:{click:function(s){return t.search(!1)}}},[t._v("关闭")]),t._v(" "),e("el-button",{attrs:{size:"small"},on:{click:t.reset}},[t._v("重置")]),t._v(" "),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(s){return t.search(!0)}}},[t._v("查询")])],1)])])},l=[],h=(e("4de4"),e("4160"),e("caad"),e("2532"),e("159b"),e("ade35"),{data:function(){return{nowType:"todo",nowStatus:0,statusType:{},taskList:[{name:"全部",status:0},{name:"催办",status:"reminder"},{name:"代办",status:"delegate"},{name:"紧急",status:"urgent"}],appList:[],configeList:{launch:["keyword","time_lower","time_upper"],todo:["keyword","name_or_number","department","taskType","time_lower","time_upper","time_type"],oversee:["keyword","name_or_number","department"],read:["keyword","name_or_number","department","time_lower","time_upper"]},keyword:"",name_or_number:"",department:"",taskType:0,time_type:0,time_lower:"",time_upper:""}},props:{type:{type:String,required:!0},status:{required:!0},searchData:{type:Object,required:!0},showStatus:{type:Object,required:!0}},components:{departSearch:n["l"]},created:function(){var t=!!this.$route.query.fudanMatter;if(t&&(this.statusType.launch=[{name:"全部",status:0},{name:"进行中",status:1},{name:"已完成",status:2},{name:"已撤销",status:3},{name:"草稿",status:4}]),this.showStatus.showTodoTab&&(this.statusType.todo=[{name:"全部",status:0},{name:"待处理",status:1},{name:"已处理",status:3}]),this.showStatus.showOverseeTab&&(this.statusType.oversee=[{name:"全部",status:0},{name:"进行中",status:1},{name:"已完成",status:2},{name:"已撤销",status:3}]),this.showStatus.showReadTab&&(this.statusType.read=[{name:"全部",status:0},{name:"进行中",status:1},{name:"已完成",status:2}]),this.nowType=this.searchData.type,this.nowStatus=this.searchData.status,this.searchData.cacheData)for(var s in this.searchData.cacheData)switch(s){case"reminder":case"delegate":case"urgent":this.taskType=s;break;default:this[s]=this.searchData.cacheData[s];break}this.getAppNameList(this.nowType)},watch:{},mounted:function(){},methods:{typeChange:function(t){this.reset(),this.getAppNameList(t)},getAppNameList:function(t){var s=this;this.appFetch({url:"getAppNames",method:"get",data:{type:t}},(function(t){0==t.e?s.appList=t.d:s.$message(t.m)}))},showFn:function(){var t=this.configeList[this.nowType];if(!t)return!1;for(var s=arguments.length,e=new Array(s),a=0;a<s;a++)e[a]=arguments[a];var i=e.filter((function(s){return t.includes(s)}));return i.length===e.length},search:function(t){var s=this,e={type:this.nowType,status:this.nowStatus,isSearch:t,cacheData:{},parameData:{}},a=this.configeList[this.nowType];t&&a.forEach((function(t){switch(e.cacheData[t]=s[t],t){case"taskType":s[t]&&(e.parameData[s[t]]=1);break;default:String(s[t]).length&&(e.parameData[t]=s[t]);break}})),this.$emit("search",e)},reset:function(){var t=this,s=this.configeList[this.nowType];s||this.$message.error("数据请求失败，请重新进入页面或点击按钮"),s.forEach((function(s){if(void 0!=t[s])switch(s){case"taskType":case"time_type":t[s]=0;break;default:t[s]="";break}})),this.nowStatus=0}}}),u=h,p=e("c701"),d=Object(p["a"])(u,r,l,!1,null,null,null),_=d.exports,m=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"myMatters_classify"},[a("ul",[a("li",{class:{active:0==t.status},staticStyle:{"margin-right":"25px"},on:{click:function(s){return t.changeStatus(0)}}},[t._v("\n          全部\n        ")]),t._v(" "),a("li",{class:{active:1==t.status},staticStyle:{"margin-right":"25px"},on:{click:function(s){return t.changeStatus(1)}}},[t._v("\n          待处理\n          "),t.fudanMatter||0==t.processNum?t._e():a("span",[t._v(t._s(t.processNum))])]),t._v(" "),a("li",{class:{active:3==t.status},on:{click:function(s){return t.changeStatus(3)}}},[t._v("已处理")]),t._v(" "),a("li",{class:{active:6==t.status},staticStyle:{"margin-right":"20px"},on:{click:function(s){return t.changeStatus(6)}}},[t.batchApps.length?[t._v("批量处理")]:t._e()],2)])]),t._v(" "),a("div",{staticClass:"myMatters_scroll",style:[t.mixMIndexHeigth],on:{scroll:t.scrollPage}},[t.batchshow?t._e():[a("div",{staticClass:"batchbox"},[a("div",{staticClass:"one"},[a("div",{staticClass:"batch_but_left"},[a("span",{staticStyle:{color:"#0066FF"}},[t._v(t._s(t.totles))]),t._v("条数据\n            ")]),t._v(" "),a("div",{staticClass:"batch_but_right",on:{click:function(s){t.showBatchRecord=!0}}},[t._v("查看处理进度")]),t._v(" "),a("div",{staticClass:"batch_but_right",on:{click:t.inquire}},[t._v("查询批量任务")])]),t._v(" "),t.testshow?a("p",[t._v("请先查询可处理的批量任务")]):t._e()]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.popshow,expression:"popshow"}],staticClass:"pop_up"},[a("div",{staticClass:"pop_bg",on:{click:function(s){t.popshow=!1}}}),t._v(" "),a("div",{staticClass:"pop_box"},[a("div",{staticClass:"pop_sele"},[a("el-select",{attrs:{size:"small",placeholder:"选择服务事项"},on:{change:t.batchAppChange},model:{value:t.selectAppId,callback:function(s){t.selectAppId=s},expression:"selectAppId"}},t._l(t.batchApps,(function(t){return a("el-option",{key:t.id+"_"+t.bpmn_id,attrs:{label:t.name,value:t.id+"_"+t.bpmn_id}})})),1)],1),t._v(" "),a("div",{staticClass:"pop_sele"},[a("el-select",{attrs:{size:"small",placeholder:"选择节点"},on:{change:t.batchNodeChange},model:{value:t.selectNodeId,callback:function(s){t.selectNodeId=s},expression:"selectNodeId"}},t._l(t.batchNodes,(function(t){return a("el-option",{key:t.id,attrs:{label:t.node_name,value:t.id}})})),1)],1),t._v(" "),a("div",{staticClass:"pop_sele"},[a("el-input",{attrs:{size:"small",placeholder:"发起人部门名称",type:"text"},on:{focus:t.inputfocue},model:{value:t.inputs,callback:function(s){t.inputs=s},expression:"inputs"}}),t._v(" "),a("img",{staticClass:"pop_img",attrs:{src:e("343c"),alt:""}})],1),t._v(" "),a("div",{staticClass:"pop_bot"},[a("el-button",{attrs:{size:"small"},on:{click:t.resetNodeTask}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.searchTask}},[t._v("确定")])],1)])])],t._v(" "),t.batchshow||t.selectNodeId?a("ul",{staticClass:"myMatters_signList"},[a("el-checkbox-group",{on:{change:t.checkChange},model:{value:t.selectTaskList,callback:function(s){t.selectTaskList=s},expression:"selectTaskList"}},t._l(t.signData,(function(s,e){return a("li",{key:e},[s.thirdparty_id&&0!=s.thirdparty_id?[a("div",{staticClass:"m_matter_list_t"},[a("div",{staticClass:"title"},[a("p",[t._v(t._s(s.thirdparty_name))]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]})]),t._v(" "),a("p",{class:{hide:!0}},[t._v("服务：")]),t._v(" "),a("p",[t._v("发起人："+t._s(s.inst_creator_name))]),t._v(" "),a("p",[t._v(t._s(0==s.task_status||1==s.task_status?"到达于":"处理于")+"："+t._s(0==s.task_status||1==s.task_status?t.mixSetTime(s.task_created):t.mixSetTime(s.task_finished)))]),t._v(" "),s.thirdparty_config_arr.from?a("p",[t._v("来自："+t._s(s.thirdparty_config_arr.from))]):t._e(),t._v(" "),0==s.task_status||1==s.task_status?a("p",[t._v("\n                  当前环节：\n                  "),a("i",[t._v(t._s(s.thirdparty_node_name))])]):[a("p",[t._v("\n                    处理环节：\n                    "),a("i",[t._v(t._s(s.task_node_name))])]),t._v(" "),a("p",[t._v("\n                    办理进度：\n                    "),0==s.inst_status?a("i",[t._v("进行中")]):t._e(),t._v("\n                    "+t._s(0==s.inst_status?"":"已结束")+"\n                  ")])]],2),t._v(" "),a("div",{staticClass:"m_matter_list_b"},[a("div",{staticClass:"m_matter_list_b_r"},[1==s.thirdparty_config_arr.process_pic?a("button",{on:{click:function(e){return t.toProcessPicUrl(s.process_pic_url)}}},[t._v("流程跟踪")]):t._e(),t._v(" "),1==s.thirdparty_config_arr.log?a("button",{on:{click:function(e){return t.showThirdpartyLog(s)}}},[t._v("处理记录")]):t._e(),t._v(" "),a("mixMTodoToExamineBtnCom",{attrs:{item:s},on:{toexamine:function(e){return t.toexamine(s)}}})],1)])]:[6==t.status?a("el-checkbox",{key:s.task_id,staticClass:"selecttask",attrs:{label:s.task_id},on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(""))]):t._e(),t._v(" "),a("div",{class:6==t.status?"padding m_matter_list_t":"m_matter_list_t"},[a("div",{staticClass:"title"},[a("p",[""!=s.delegate_name?a("span",{staticClass:"delegate"},[t._v("代办来自"+t._s(s.delegate_name))]):t._e(),t._v(" "),"yes"==s.urgent?a("span",{staticClass:"urgent"},[t._v("紧急")]):t._e(),t._v(" "),"yes"==s.is_reminder?a("span",{staticClass:"reminder"},[t._v("催办")]):t._e(),t._v(" "),6==s.task_status?a("span",{staticClass:"reject"},[t._v("驳回")]):t._e(),t._v(" "),"2"==s.is_sign?a("span",{staticClass:"receipt"},[t._v(t._s(t.mixGetConfig("mixCountersigntext",s.app_id).receiptText))]):t._e(),t._v(" "),"1"==s.is_sign?a("span",{staticClass:"endorse"},[t._v(t._s(s.add_sign_name)+t._s(t.mixGetConfig("mixCountersigntext",s.app_id).tagText))]):t._e(),t._v("\n                    "+t._s(s.task_name?s.task_name:s.app_name)+"\n                  ")]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:0==s.task_status||1==s.task_status,expression:"item.task_status == 0 || item.task_status == 1"}]},[t._v(t._s(s.percent)+"%")])]),t._v(" "),a("p",{class:{hide:!s.task_name}},[t._v("服务："+t._s(s.app_name))]),t._v(" "),a("p",[t._v("发起人："+t._s(s.inst_creator_name))]),t._v(" "),a("p",[t._v(t._s(0==s.task_status||1==s.task_status?"到达于":"处理于")+"："+t._s(0==s.task_status||1==s.task_status?t.mixSetTime(s.task_created):t.mixSetTime(s.task_finished)))]),t._v(" "),0==s.task_status||1==s.task_status?a("p",[t._v("\n                  当前环节：\n                  "),a("i",[t._v(t._s(s.node_name))])]):[a("p",[t._v("\n                    处理环节：\n                    "),a("i",[t._v(t._s(s.task_node_name))])]),t._v(" "),a("p",[t._v("\n                    办理进度：\n                    "),0==s.inst_status?a("i",[t._v("进行中")]):t._e(),t._v("\n                    "+t._s(0==s.inst_status?"":"已结束")+"\n                  ")])],t._v(" "),t.batchErrorList.includes(s.task_id.toString())?a("p",{staticStyle:{color:"red"}},[t._v("重新审批处理")]):t._e()],2),t._v(" "),a("div",{staticClass:"m_matter_list_b"},[a("div",{staticClass:"m_matter_list_b_r"},[a("button",{on:{click:function(e){return t.toexamine(s,"showBpmn")}}},[t._v("流程跟踪")]),t._v(" "),a("button",{on:{click:function(e){return t.toexamine(s,"history")}}},[t._v("处理记录")]),t._v(" "),a("button",{class:0==s.task_status||1==s.task_status||6==s.task_status?"examine":"see",on:{click:function(e){return t.toexamine(s)}}},[t._v("\n                    "+t._s(0==s.task_status||1==s.task_status||6==s.task_status?"处理事项":"查看表单")+"\n                  ")])])])]],2)})),0)],1):t._e(),t._v(" "),6!=t.status?[0==t.signData.length?a("div",{staticClass:"myMatters_nodata"},[t._v(t._s(t.$t("system.noTask")))]):t._e()]:[0==t.signData.length?a("div",{staticClass:"W_buttom",staticStyle:{margin:".2rem"}},[a("el-button",{attrs:{size:"small"},on:{click:t.newshow}},[t._v("重置")])],1):t._e()]],2),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.popshow,expression:"popshow"}],staticClass:"pop_up"},[a("div",{staticClass:"pop_bg",on:{click:function(s){t.popshow=!1}}}),t._v(" "),a("div",{staticClass:"pop_box"},[a("div",{staticClass:"pop_sele"},[a("el-select",{attrs:{size:"small",placeholder:"选择服务事项"},on:{change:t.batchAppChange},model:{value:t.selectAppId,callback:function(s){t.selectAppId=s},expression:"selectAppId"}},t._l(t.batchApps,(function(t){return a("el-option",{key:t.id+"_"+t.bpmn_id,attrs:{label:t.name,value:t.id+"_"+t.bpmn_id}})})),1)],1),t._v(" "),a("div",{staticClass:"pop_sele"},[a("el-select",{attrs:{size:"small",placeholder:"选择节点"},on:{change:t.batchNodeChange},model:{value:t.selectNodeId,callback:function(s){t.selectNodeId=s},expression:"selectNodeId"}},t._l(t.batchNodes,(function(t){return a("el-option",{key:t.id,attrs:{label:t.node_name,value:t.id}})})),1)],1),t._v(" "),a("div",{staticClass:"pop_sele"},[a("el-input",{attrs:{size:"small",placeholder:"发起人部门名称",type:"text"},on:{focus:t.inputfocue},model:{value:t.inputs,callback:function(s){t.inputs=s},expression:"inputs"}}),t._v(" "),a("img",{staticClass:"pop_img",attrs:{src:e("343c"),alt:""}})],1),t._v(" "),a("div",{staticClass:"pop_bot"},[a("el-button",{attrs:{size:"small"},on:{click:t.resetNodeTask}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.searchTask}},[t._v("确定")])],1)])]),t._v(" "),!t.batchshow&&t.totles>0?a("div",{staticClass:"batchbox_but"},[a("el-checkbox",{staticClass:"margin_right10",on:{change:t.checkAllChange},model:{value:t.isCheckAll,callback:function(s){t.isCheckAll=s},expression:"isCheckAll"}},[t._v("全选")]),t._v(" "),a("el-button",{attrs:{type:"primary",round:"",disabled:0==t.selectTaskList.length},on:{click:t.batchbut}},[t._v("\n        批量操作\n        "),0!=t.selectTaskList.length?[t._v("（"+t._s(t.selectTaskList.length)+"）")]:t._e()],2)],1):t._e(),t._v(" "),a("div",{staticClass:"sign_alert"},[a("ul",[a("li",{class:{active:"0"==t.classNum},on:{click:function(s){return t.classify(0)}}},[a("span",[t._v("全部")]),t._v(" "),"0"==t.classNum?a("img",{attrs:{src:e("570d"),alt:""}}):t._e()]),t._v(" "),a("li",{class:{active:"reminder"==t.classNum},on:{click:function(s){return t.classify("reminder")}}},[a("span",[t._v("催办")]),t._v(" "),"reminder"==t.classNum?a("img",{attrs:{src:e("570d"),alt:""}}):t._e()]),t._v(" "),a("li",{class:{active:"delegate"==t.classNum},on:{click:function(s){return t.classify("delegate")}}},[a("span",[t._v("代办")]),t._v(" "),"delegate"==t.classNum?a("img",{attrs:{src:e("570d"),alt:""}}):t._e()]),t._v(" "),a("li",{class:{active:"urgent"==t.classNum},on:{click:function(s){return t.classify("urgent")}}},[a("span",[t._v("紧急")]),t._v(" "),"urgent"==t.classNum?a("img",{attrs:{src:e("570d"),alt:""}}):t._e()])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.opershow,expression:"opershow"}],staticClass:"W_operation"},[a("ul",{staticClass:"W_operation_ul"},[t.batchAuth.deal&&t.batchAuth.deal.includes(-5)?a("li",{staticClass:"typebutton",on:{click:function(s){return t.selectBacthUser("-5")}}},[t._v("\n          代处理\n        ")]):t._e(),t._v(" "),t._l(t.batchAuth.newCustom,(function(s,e){return a("li",{key:e,on:{click:function(e){return t.toConfirmdo(s.value,t.batchAuth.deal)}}},[t._v("\n          "+t._s(s.show_name?s.show_name:s.name)+"\n        ")])})),t._v(" "),a("li",{on:{click:function(s){t.opershow=!1}}},[t._v("取消")])],2)]),t._v(" "),a("thirdpartyLogAlyer",{ref:"thirdpartyLogAlyer"}),t._v(" "),a("div",{attrs:{id:"showVerify"}},[a("div",{attrs:{id:"batchbox"}},[a("div",{class:{topgury:!0}},[t.Generationshow?[a("div",{staticClass:"topgury active"},[a("div",{staticClass:"modelName"},[t._v("代处理")]),t._v(" "),a("button",{staticClass:"popbtn",class:{active:-5==t.type},on:{click:t.chooseperson}},[t._v("选择人员")]),t._v(" "),a("ul",{staticClass:"poplist"},t._l(t.param,(function(s,i){return a("li",{key:i},[a("span",[t._v(t._s(s.name))]),t._v(" "),a("img",{attrs:{src:e("7f0a"),alt:""},on:{click:function(s){return s.stopPropagation(),t.delone(t.param,i)}}})])})),0)])]:t._e(),t._v(" "),t.batchAuth.deal&&t.batchAuth.deal.includes(-1)?[a("div",{staticClass:"modelName"},[a("span",[t._v("处理意见")]),t._v(" "),a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.clickDropdown}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-more"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"saveShortcut"}},[t._v("保存为常用")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"isShowCommonLange"}},[t._v("设置")])],1)],1)],1),t._v(" "),t.commonLanges.length?a("p",{staticClass:"commonlangeselect"},[a("el-select",{attrs:{size:"small",placeholder:"请选择常用处理意见"},on:{change:t.changeCommonLange},model:{value:t.selectCommonLange,callback:function(s){t.selectCommonLange=s},expression:"selectCommonLange"}},t._l(t.commonLanges,(function(t){return a("el-option",{key:t.id,attrs:{label:t.message,value:t.id}})})),1)],1):t._e(),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请输入内容"},domProps:{value:t.comment},on:{input:function(s){s.target.composing||(t.comment=s.target.value)}}})]:t._e(),t._v(" "),a("el-dialog",{attrs:{"custom-class":"commonlanguage",title:"常用处理意见",center:"","close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":!0,visible:t.isShowCommonLange},on:{"update:visible":function(s){t.isShowCommonLange=s}}},[a("ul",{staticClass:"list"},t._l(t.commonLanges,(function(s){return a("li",[a("span",[t._v(t._s(s.message))]),t._v(" "),a("i",{staticClass:"el-icon-error",on:{click:function(e){return t.deleteShortcut(s.id)}}}),t._v(" "),a("div",{staticClass:"clear"})])})),0)])],2)]),t._v(" "),a("div",{staticClass:"batchbox_but"},[a("el-button",{attrs:{round:""},on:{click:t.laststep}},[t._v("上一步")]),t._v(" "),a("el-button",{attrs:{type:"primary",round:"",disabled:0==t.selectTaskList.length},on:{click:t.consenttype}},[t._v("\n          确定"+t._s(t.types[t.nowType])+"\n          "),t.selectTaskList.length>0?[t._v("（"+t._s(t.selectTaskList.length)+"）")]:t._e()],2)],1)]),t._v(" "),t.showpop?a("pop",{attrs:{haschoose:t.haschoose,queryType:t.queryType,departlimit:[{name:"根部门",id:0}]},on:{getData:t.getData}}):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.confirmshow,expression:"confirmshow"}],staticClass:"confirm_box"},[a("div",{staticClass:"bg_show"}),t._v(" "),a("div",{staticClass:"confirm_con"},[a("p",[t._v("确认执行“"+t._s(t.types[t.nowType])+"”操作？")]),t._v(" "),a("p",[t._v("总共 "+t._s(t.selectTaskList.length)+" 条数据")]),t._v(" "),a("div",[a("el-button",{attrs:{size:"small"},on:{click:function(s){t.confirmshow=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.consenttype}},[t._v("确定")])],1)])]),t._v(" "),t.showSelectEx?a("nextNode",{on:{setinfo:t.submitExUser}}):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowProgress,expression:"isShowProgress"}],staticClass:"progress_box"},[a("div",{staticClass:"dialogVisible_bg"}),t._v(" "),a("div",{staticClass:"dialogVisible success_box"},[a("span",{staticClass:"el-icon-success"}),t._v(" "),a("span",{staticClass:"success"},[t._v("批处理任务提交成功")]),t._v(" "),a("span",{staticClass:"blue",on:{click:function(s){return t.closeDoResult(!0)}}},[t._v("查看进度"),a("span",{staticClass:"el-icon-arrow-right"})]),t._v(" "),a("el-button",{staticStyle:{width:"1rem"},attrs:{size:"small",type:"primary"},on:{click:function(s){return t.closeDoResult(!1)}}},[t._v("关闭")])],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowDoresult,expression:"isShowDoresult"}],staticClass:"doresult_box"},[a("div",{staticClass:"dialogVisible_bg"}),t._v(" "),a("div",{staticClass:"doresult"},[a("p",{staticClass:"w_test"},[t._v("处理结果")]),t._v(" "),a("div",{staticClass:"content"},[a("p",[a("span",{staticClass:"successnum"},[t._v(t._s(t.batchSuccess))]),t._v(" 条处理成功\n          ")]),t._v(" "),a("p",[a("span",{staticClass:"errornum"},[t._v(t._s(t.batchErrorList.length))]),t._v(" 条处理失败\n          ")])]),t._v(" "),a("div",{staticClass:"resultfooter"},[a("span",{staticClass:"okbutton",on:{click:t.closeDoResult}},[t._v("确 定")])])])]),t._v(" "),t.showBatchRecord?a("mBatchRecord",{on:{close:function(s){t.showBatchRecord=!1}}}):t._e()],1)},v=[],g=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"m_batchRecord",on:{scroll:t.scrollPage}},[e("div",{staticClass:"batchRecord-all"},[e("div",{staticClass:"search"},[e("div",{staticClass:"search-top"},[e("div",[e("span",[t._v("事项名称")]),t._v(" "),e("el-select",{attrs:{size:"small",placeholder:"选择事项"},on:{change:t.batchAppChange},model:{value:t.selectAppId,callback:function(s){t.selectAppId=s},expression:"selectAppId"}},t._l(t.batchApps,(function(t){return e("el-option",{key:t.id+"_"+t.bpmn_id,attrs:{label:t.name,value:t.id+"_"+t.bpmn_id}})})),1)],1),t._v(" "),e("div",[e("span",[t._v("节点名称")]),t._v(" "),e("el-select",{attrs:{size:"small",placeholder:"选择节点"},on:{change:t.batchNodeChange},model:{value:t.selectNodeId,callback:function(s){t.selectNodeId=s},expression:"selectNodeId"}},t._l(t.batchNodes,(function(t){return e("el-option",{key:t.id,attrs:{label:t.node_name,value:t.id}})})),1)],1)]),t._v(" "),e("div",{staticClass:"search-bottom"},[e("span",{staticClass:"blue",on:{click:t.close}},[e("span",{staticClass:"el-icon-arrow-left"}),t._v("\n          返回批量处理\n        ")]),t._v(" "),e("span",{staticClass:"search-bottom-right"},[e("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:t.reset}},[t._v("重置")]),t._v(" "),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.searchs}},[t._v("搜索")])],1)])]),t._v(" "),t._l(t.batchRecordData,(function(s,a){return e("div",{key:a,staticClass:"batchRecord-list"},[e("div",{staticClass:"list-top"},[e("div",{staticClass:"list-top-name"},[t._v("任务名称："+t._s(s.app_name))]),t._v(" "),e("div",{staticClass:"list-top-node"},[t._v("审批环节："+t._s(s.node_name))]),t._v(" "),e("div",{staticClass:"list-top-time"},[t._v("任务时间："+t._s(s.created))]),t._v(" "),e("div",{staticClass:"list-top-status"},[t._v("\n          总数："),e("span",{staticClass:"blue"},[t._v(t._s(s.total_num))]),t._v(" \n          已完成："),e("span",{class:{success:s.success_num}},[t._v(t._s(s.success_num))]),t._v(" \n          失败："),e("span",{class:{error:s.error_num}},[t._v(t._s(s.error_num))]),t._v(" "),0==s.status?e("span",{staticClass:"list-top-statusR"},[e("span",{staticClass:"con"}),t._v("\n            等待处理\n          ")]):1==s.status?e("span",{staticClass:"list-top-statusR success"},[e("span",{staticClass:"con"}),t._v("\n            处理完成\n          ")]):2==s.status?e("span",{staticClass:"list-top-statusR error"},[e("span",{staticClass:"con"}),t._v("\n            异常\n          ")]):3==s.status?e("span",{staticClass:"list-top-statusR blue"},[e("span",{staticClass:"con"}),t._v("\n            处理中\n          ")]):t._e()])]),t._v(" "),e("div",{staticClass:"list-bottom"},[2==s.status?e("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.refresh(s.id)}}},[t._v("重试")]):t._e(),t._v(" "),0==s.status?e("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.delBatch(s.id)}}},[t._v("删除")]):t._e()],1)])}))],2)])},f=[],w=(e("ac1f"),e("841c"),e("1276"),e("2909")),y=(e("b605"),{data:function(){return{cancel:!1,selectAppId:"0_0",selectNodeId:0,batchNodes:[{id:0,node_name:"全部"}],scrollLock:!1,batchRecordData:[],batchApps:[{id:0,bpmn_id:0,name:"全部",nodes:[]}],total:0,p:1}},props:{status:{type:Boolean}},created:function(){this.getList(),this.search()},watch:{cancel:function(t){t||this.$emit("update:status",t)},status:function(t){t&&(this.cancel=t)}},mounted:function(){},methods:{batchAppChange:function(){var t=this;this.selectNodeId=0,this.batchApps.forEach((function(s){s.id==t.selectAppId.split("_")[0]&&s.bpmn_id==t.selectAppId.split("_")[1]&&(t.batchNodes=s.nodes)}))},batchNodeChange:function(){},handleCurrentChange:function(t){this.p=t,this.search(),console.log(t)},getList:function(){var t=this;this.appFetch({url:"getRecordNode",method:"get"},(function(s){0==s.e?(t.batchApps=s.d,t.batchApps.unshift({id:0,bpmn_id:0,name:"全部",nodes:[]}),t.batchApps.forEach((function(t){t.nodes.unshift({id:0,node_name:"全部"})}))):t.$message({type:"error",message:s.m,showClose:!0})}),(function(s){console.log(s),t.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))},search:function(){var t=this;this.appFetch({url:"batchRecord",method:"post",data:{app_id:this.selectAppId.split("_")[0],node_id:this.selectNodeId,p:this.p,page_size:10}},(function(s){if(0==s.e){var e;if(1==t.p)t.batchRecordData=s.d.data;else(e=t.batchRecordData).push.apply(e,Object(w["a"])(s.d.data));t.total=s.d.total}else t.$message({type:"error",message:s.m,showClose:!0});t.scrollLock=!1}),(function(){t.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))},scrollPage:function(t){var s=parseInt($(t.target).scrollTop()+$(t.target).height())-$(".batchRecord-all").height();if(s<=2&&s>=-2){if(this.scrollLock||this.total==this.batchRecordData.length)return!1;this.scrollLock=!0,this.p++,this.search()}},refresh:function(t){var s=this;this.appFetch({url:"restBatch",method:"post",data:{id:t}},(function(t){0==t.e?(s.p=1,s.$message.success("操作成功"),s.search()):s.$message({type:"error",message:t.m,showClose:!0})}),(function(){s.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))},delBatch:function(t){var s=this;this.appFetch({url:"delBatch",method:"post",data:{id:t}},(function(t){0==t.e?(s.p=1,s.$message.success("删除成功"),s.search()):s.$message({type:"error",message:t.m,showClose:!0})}),(function(){s.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))},searchs:function(){this.p=1,this.search()},reset:function(){this.p=1,this.selectAppId="0_0",this.selectNodeId=0,this.batchNodes=[{id:0,node_name:"全部"}],this.search()},close:function(){this.$emit("close")}}}),b=y,C=Object(p["a"])(b,g,f,!1,null,null,null),k=C.exports,T=(e("d81d"),e("a434"),e("b0c0"),e("d3b7"),e("25f0"),e("dc64")),A=e("702e"),S=e("e673"),N=e("2f62"),x={data:function(){return{matterHelper:T["a"],signData:[],processNum:0,rejectNum:0,status:1,loading:!1,scrollLock:!1,p:1,page:10,classNum:"0",classObj:null,fudanMatter:!1,batchshow:!0,batchApps:[],selectAppId:"",batchNodes:[],selectNodeId:"",selectTaskList:[],popshow:!1,testshow:!0,isCheckAll:!1,batchAuth:{},showVerify:!1,opershow:!1,totles:0,inputs:"",Wshow:!1,app_id:"",showSelectEx:!1,progressBar:null,isShowProgress:!1,progressNum:10,batchSuccess:0,isShowDoresult:!1,batchErrorList:[],confirmshow:!1,hasChooseDepart:[],type:-1,nowdata:{},examineInfo:null,haschoose:[],queryType:"",showpop:!1,updateAssignee:null,currNode:[],comment:"",param:[],selectType:"",types:{0:"终止",1:"同意",2:"驳回",3:"提交",4:"跳转","-5":"代处理"},nowType:"",Generationshow:!1,selectCommonLange:"",commonLanges:[],saveCommonLock:!1,isShowCommonLange:!1,nowBatchKey:"",showBatchRecord:!1}},computed:Object(o["a"])({},Object(N["d"])("matter",["nodeDatas","selectNodeUid","sms_send"])),watch:{showVerify:function(t){$("#showVerify")[t?"show":"hide"](),$(".myMatters_scroll")[t?"hide":"show"]()}},created:function(){this.fudanMatter=!!this.$route.query.fudanMatter,"todo"==this.$route.query.page&&(this.status=this.$route.query.changeStatus),this.getSignData(this.status),this.getBatchNodes(),this.getCommonLange()},methods:Object(o["a"])(Object(o["a"])({},Object(N["c"])("matter",["SET_NODEDATAS","SET_SELECTUIDS","SET_SMSSEND"])),{},{inputfocue:function(){this.selectType="oneDepartperson",this.queryType="oneDepart",this.haschoose=JSON.parse(JSON.stringify(this.hasChooseDepart)),this.showpop=!0},showVerifys:function(t){this.showVerify=t},toexamine:function(t,s){if(1==t.thirdparty_id)return window.location.href=t.thirdparty_form_mobile_url_view?t.thirdparty_form_mobile_url_view:t.thirdparty_form_url_view,!1;this.$router.push({path:t.node_config&&t.node_config.steps&&t.node_config.steps.length>1?"/matter/m_rejectStep":"/matter/m_examine",query:{type:6==t.task_status?"reject":"todo",task_id:t.task_id,inst_id:t.inst_id,show:s,changeStatus:this.status,id:t.id?t.id:"",sign:t.is_sign}})},toProcessPicUrl:function(t){window.location.href=t},getSignData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this;this.loading=!0,this.appFetch({method:"get",url:"getMyTodo",data:Object(o["a"])({status:t,p:s},e)},(function(t){0==t.e&&(a.signData=t.d.list,a.loading=!1,a.processNum=String(t.d.process_num).length<=2?t.d.process_num:"...",a.rejectNum=String(t.d.reject_num).length<=2?t.d.reject_num:"...")}))},changeStatus:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;$(".sign_alert").hide(),this.popshow=!1,this.classNum="0",this.signData=[],this.p=1,this.scrollLock=!1,this.classObj=null,$(".myMatters_scroll").scrollTop(0),this.status=t,6!==t?(this.getSignData(t,this.p,s),this.batchshow=!0):(this.batchshow=!1,this.batchApps.length&&1==this.batchApps.length&&this.batchApps[0].nodes.length&&1==this.batchApps[0].nodes.length&&(this.selectAppId=this.batchApps[0].id+"_"+this.batchApps[0].bpmn_id,this.selectNodeId=this.batchApps[0].nodes[0].id,this.batchNodes=this.batchApps[0].nodes,this.batchNodeChange()),this.selectNodeId&&this.getTasks())},scrollPage:function(t){var s=parseInt($(t.target).scrollTop()+$(t.target).height())-$(".myMatters_signList").height();if(s<=1&&s>=-100){if(this.scrollLock)return!1;this.scrollLock=!0,this.p++;var e=this;if(6==this.status){var a={node_id:this.selectNodeId,p:this.p,page_size:this.page};this.appFetch({url:"getMyBatchList",method:"GET",data:a},(function(t){var s;0==t.e?(e.scrollLock=!1,(s=e.signData).push.apply(s,Object(w["a"])(t.d.list)),e.totles=e.totles+t.d.total,e.popshow=!1,e.testshow=!1):e.$message({type:"error",message:t.m,showClose:!0})}),(function(){e.$message({type:"error",message:"获取任务列表失败",showClose:!0})}))}else this.appFetch({method:"get",url:"getMyTodo",data:Object(o["a"])({status:this.status,p:this.p},this.classObj)},(function(t){var s;0==t.e&&(e.scrollLock=!1,t.d.list.length<20&&(e.scrollLock=!0),(s=e.signData).push.apply(s,Object(w["a"])(t.d.list)))}))}},showAlert:function(){$(".sign_alert").toggle()},classify:function(t){if(t==this.classNum)return!1;if(this.classNum=t,this.classObj=null,this.p=1,this.scrollLock=!1,$(".myMatters_scroll").scrollTop(0),0==t)return this.getSignData(this.status,1),$(".sign_alert").hide(),!1;var s={};s[t]=1,this.classObj=s,this.getSignData(this.status,1,s),$(".sign_alert").hide()},showThirdpartyLog:function(t){this.$refs.thirdpartyLogAlyer.showThirdpartyLog(t)},inquire:function(){this.popshow=!0},searchTask:function(){if(!this.selectNodeId)return this.$message({type:"error",message:"请先选择节点",showClose:!0}),!1;this.p=1,this.getTasks()},getBatchNodes:function(){var t=this;this.appFetch({url:"getBatchNodes",method:"GET"},(function(s){0==s.e?t.batchApps=s.d.apps:t.$message({type:"error",message:s.m,showClose:!0})}),(function(){t.$message({type:"error",message:"获取可批量节点失败",showClose:!0})}))},batchAppChange:function(){var t=this;this.selectNodeId="",this.batchApps.forEach((function(s){s.id==t.selectAppId.split("_")[0]&&s.bpmn_id==t.selectAppId.split("_")[1]&&(t.batchNodes=s.nodes)}))},batchNodeChange:function(){var t=this;this.signData=[],this.total=0,this.p=1,this.isCheckAll=!1,this.selectTaskList=[],this.batchNodes.forEach((function(s){s.id==t.selectNodeId&&(t.batchAuth=s.auth,t.batchAuth.deal=t.batchAuth.common.deal?t.batchAuth.common.deal:[],t.batchAuth.newCustom=t.batchAuth.custom.filter((function(t){return-1!=t.sort})).sort((function(t,s){return t.sort-s.sort})))}))},getTasks:function(){var t={node_id:this.selectNodeId,p:this.p,page_size:this.page},s=this;this.hasChooseDepart.length&&(t.depart_id=this.hasChooseDepart[0].id),this.appFetch({url:"getMyBatchList",method:"GET",data:t},(function(t){0==t.e?(s.signData=t.d.list,t.d.list.length&&(s.app_id=t.d.list[0].app_id),s.totles=t.d.total,s.popshow=!1,s.testshow=!1):s.$message({type:"error",message:t.m,showClose:!0})}),(function(){s.$message({type:"error",message:"获取任务列表失败",showClose:!0})}))},checkChange:function(){this.isCheckAll=0!=this.signData.length&&this.selectTaskList.length==this.signData.length},checkAllChange:function(){var t=this;this.selectTaskList=[],this.isCheckAll&&this.signData.forEach((function(s){t.selectTaskList.push(s.task_id)}))},batchbut:function(){this.opershow=!0},toConfirmdo:function(t,s,e){if(!this.selectTaskList.length)return this.$message({type:"error",message:"请先选择可批量审批的任务",showClose:truetrue}),!1;this.Generationshow=!1,this.selectCommonLange="",this.comment="",this.nowType=t,s.includes(-1)?(this.showVerify=!0,this.opershow=!1):(this.confirmshow=!0,this.opershow=!1)},selectBacthUser:function(t){this.nowType=t,this.showVerify=!0,this.opershow=!1,this.Generationshow=!0},getBatchKey:function(){return this.nowBatchKey=(new Date).getTime()+Math.ceil(1e4*Math.random()).toString(),this.nowBatchKey},submitExUser:function(t){if(!t)return this.showSelectEx=!1,this.SET_NODEDATAS([]),this.SET_SELECTUIDS({}),this.SET_SMSSEND({}),!1;this.showSelectEx=!1,this.consenttype()},consenttype:function(){var t=this.nowType,s=this.nowValue,e={event_key:this.getBatchKey()},a={name:this.types[t],type:t,value:s||t},i="",o=this;if(2==this.mutilType&&this.isCheckAll?(i="toBatchByNodeId",e.node_id=this.selectNodeId,this.hasChooseDepart.length&&(e.depart_id=this.hasChooseDepart[0].id)):(i="toBatchByTaskIds",e.task_id=this.selectTaskList),!this.appCommonH.isEmptyObj(this.selectNodeUid)||!this.appCommonH.isEmptyObj(this.sms_send))for(var n in a.special_approver=[],this.nodeDatas){var c=this.nodeDatas[n],r={node_key:c.node_key};this.selectNodeUid[c.node_key]&&(r.uids=this.selectNodeUid[c.node_key]),this.sms_send[c.node_key]&&(r.sms_send=this.sms_send[c.node_key]),a.special_approver.push(r)}if("-5"==t){if(""==this.param)return this.$message.error("请选择人员");a.param={uid:this.param[0].uid}}this.comment&&(e.comment=this.comment),e.operation=a,this.appFetch({url:i,data:e,method:"POST"},(function(t){0==t.e?o.isShowProgress=!0:"10100"==t.e?o.selecExUser(t.d):o.$message({type:"error",message:t.m,showClose:!0})}),(function(){o.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))},selecExUser:function(t){var s={},e={};this.SET_NODEDATAS(t.nodes),this.nodeDatas.forEach((function(t){t.users&&t.users.length&&(s[t.node_key]=t.users.map((function(t){return t.uid}))),2==t.sms_permit&&(e[t.node_key]=0)})),this.SET_SELECTUIDS(s),this.SET_SMSSEND(e),this.confirmshow=!1,this.showSelectEx=!0},laststep:function(){this.showVerify=!1},getData:function(t){this.haschoose=t,this.showpop=!1,"chooseperson"==this.selectType?this.$set(this,"param",JSON.parse(JSON.stringify(this.haschoose))):"oneDepartperson"==this.selectType&&t.length&&(this.inputs=t[0].name,this.$set(this,"hasChooseDepart",JSON.parse(JSON.stringify(this.haschoose))))},chooseperson:function(){this.type=-5,this.selectType="chooseperson",this.queryType="oneUser",this.haschoose=JSON.parse(JSON.stringify(this.param)),this.showpop=!0},clickDropdown:function(t){"saveShortcut"==t?this.saveShortcut():"isShowCommonLange"==t&&(this.isShowCommonLange=!0)},delone:function(t,s){t.splice(s,1)},saveShortcut:function(){var t="",s=this,e=this.commonLanges.filter((function(t){return t.message==s.comment}));if(this.comment?e.length&&(t="当前处理意见已存在，不可重复保存"):t="处理意见不可为空",t)return this.$message.error({message:t,showClose:!0}),!1;if(this.saveCommonLock)return!1;this.saveCommonLock=!0;s=this;this.appFetch({url:"addShortcut",method:"POST",data:{message:this.comment}},(function(t){s.saveCommonLock=!1,0==t.e?(s.$message.success({message:"保存成功",showClose:!0}),s.getCommonLange()):console.error("获取常用意见失败")}),(function(t){s.saveCommonLock=!1,console.error("获取常用意见失败")}))},getCommonLange:function(){var t=this;this.appFetch({url:"getShortcutList",method:"GET"},(function(s){0==s.e?t.commonLanges=s.d.data:console.error("获取常用意见失败")}),(function(t){console.error("获取常用意见失败")}))},changeCommonLange:function(){var t=this,s=this.commonLanges.filter((function(s){return s.id==t.selectCommonLange}));s.length&&(this.comment=s[0].message)},deleteShortcut:function(t){var s=this;this.appFetch({url:"deleteShortcut",method:"POST",data:{id:t}},(function(t){0==t.e?s.getCommonLange():s.$message.error({message:"删除常用语失败",showClose:!0})}),(function(t){s.$message.error({message:"删除常用语失败",showClose:!0})}))},showProgress:function(t){if(this.confirmshow=!1,this.isShowProgress=t,this.progressNum=10,clearInterval(this.progressBar),t){var s=this;this.progressBar=setInterval((function(){s.appFetch({url:"getBatchProgress",data:{event_key:s.nowBatchKey},method:"GET"},(function(t){0==t.e&&(s.progressNum=t.d.completed/t.d.total*100,t.d.completed==t.d.total&&(clearInterval(s.progressBar),setTimeout((function(){s.isShowProgress=!1}),1e3),setTimeout((function(){s.isShowDoresult=!0}),1500)))}),(function(){console.log("获取最新进度失败")}))}),1e3)}},closeDoResult:function(t){if(this.showBatchRecord=!!t,this.isShowDoresult=!1,this.isCheckAll=!1,this.selectTaskList=[],this.opershow=!1,this.showVerify=!1,this.isShowProgress=!1,!this.selectNodeId)return this.$message({type:"error",message:"请先选择节点",showClose:!0}),!1;var s={node_id:this.selectNodeId,p:this.p,page_size:this.page},e=this;this.hasChooseDepart.length&&(s.depart_id=this.hasChooseDepart[0].id),this.appFetch({url:"getMyBatchList",method:"GET",data:s},(function(t){0==t.e?(e.signData=t.d.list,e.totles=t.d.total,e.testshow=!1,e.popshow=!1,e.Wshow=!0):e.$message({type:"error",message:t.m,showClose:!0})}),(function(){e.$message({type:"error",message:"获取任务列表失败",showClose:!0})}))},resetNodeTask:function(){this.selectAppId="",this.selectNodeId="",this.batchAuth={},this.signData=[],this.total=0,this.p=1,this.inputs="",this.isCheckAll=!1,this.selectTaskList=[],this.hasChooseDepart=[]},newshow:function(){this.popshow=!0,this.resetNodeTask()}}),mixins:[A["a"],S["a"]]},D=Object(o["a"])({name:"mTodoList",components:{thirdpartyLogAlyer:n["H"],pop:n["w"],nextNode:n["z"],mBatchRecord:k}},x),L=D,I=Object(p["a"])(L,m,v,!1,null,null,null),M=I.exports,O=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"myMatters_classify"},[e("ul",[e("li",{class:{active:0==t.status},on:{click:function(s){return t.changeStatus(0)}}},[t._v("全部\n\t\t\t\t")]),t._v(" "),e("li",{class:{active:1==t.status},on:{click:function(s){return t.changeStatus(1)}}},[t._v("进行中\n\t\t\t\t\t"),0!=t.processNum?e("span",[t._v(t._s(t.processNum))]):t._e()]),t._v(" "),e("li",{class:{active:2==t.status},on:{click:function(s){return t.changeStatus(2)}}},[t._v("已完成\n\t\t\t\t\t")]),t._v(" "),e("li",{class:{active:3==t.status},on:{click:function(s){return t.changeStatus(3)}}},[t._v("已撤销")])])]),t._v(" "),e("div",{staticClass:"myMatters_scroll",style:[t.mixMIndexHeigth],on:{scroll:function(s){return t.scrollPage(s)}}},[e("ul",{staticClass:"myMatters_visionList"},t._l(t.visionData,(function(s,a){return e("li",{key:a},[e("div",{staticClass:"m_matter_list_t"},[e("div",{staticClass:"title"},[e("p",["yes"==s.urgent?e("span",{staticClass:"urgent"},[t._v("紧急")]):t._e(),t._v("\n\t\t\t\t\t\t\t\t"+t._s(s.task_name?s.task_name:s.app_name)+"\n\t\t\t\t\t\t\t")]),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:0==s.status,expression:"item.status == 0"}]},[t._v(t._s(s.percent)+"%")])]),t._v(" "),e("p",{class:{hide:!s.task_name}},[t._v("服务："+t._s(s.app_name))]),t._v(" "),e("p",[t._v("发起人："+t._s(s.creator_name))]),t._v(" "),e("p",[t._v("提交于："+t._s(t.mixSetTime(s.created)))]),t._v(" "),0==s.status?e("p",[t._v("当前环节："),e("i",[t._v(t._s(s.nodes[0]&&s.nodes[0].node_name))])]):2==s.status?e("p",[t._v("办理结果："),e("i",{staticClass:"success"},[t._v("成功办理")])]):1==s.status?e("p",[t._v("办理结果："),e("i",{staticClass:"stop"},[t._v("终止办理")])]):4==s.status?e("p",[t._v("办理结果："),e("i",{staticClass:"revoke"},[t._v("已撤销")])]):t._e()]),t._v(" "),e("div",{staticClass:"m_matter_list_b"},[e("div",{staticClass:"m_matter_list_b_r"},[e("button",{on:{click:function(e){return t.toexamine(s,"showBpmn")}}},[t._v("流程跟踪")]),t._v(" "),e("button",{on:{click:function(e){return t.toexamine(s,"history")}}},[t._v("处理记录")]),t._v(" "),e("button",{class:0==s.status?"examine":"see",on:{click:function(e){return t.toexamine(s)}}},[t._v(t._s(0==s.status?"处理事项":"查看表单"))])])])])})),0),t._v(" "),0==t.visionData.length?e("div",{staticClass:"myMatters_nodata"},[t._v("\n\t\t\t\t"+t._s(t.$t("system.noOversee"))+"\n\t\t\t")]):t._e()]),t._v(" "),e("div",{staticClass:"vision_alert"},[e("ul",[e("li",{class:{active:0==t.classNum},on:{click:function(s){return t.classify(0)}}},[e("span",[t._v("全部")]),t._v(" "),0==t.classNum?e("img",{attrs:{src:t.appConfig.staticUrl+"/img/444817593558789377.png",alt:""}}):t._e()]),t._v(" "),t._l(t.apps,(function(s,a){return e("li",{key:a,class:{active:t.classNum==s.id},on:{click:function(e){return t.classify(s.id)}}},[e("span",[t._v(t._s(s.name))]),t._v(" "),t.classNum==s.id?e("img",{attrs:{src:t.appConfig.staticUrl+"/img/444817593558789377.png",alt:""}}):t._e()])}))],2)]),t._v(" "),t.seeShow?e("div",{staticClass:"rightNowBoxShadow",on:{click:function(s){s.stopPropagation(),t.seeShow=!1}}},[e("div",{staticClass:"seeBox"},[e("i",{staticClass:"el-icon-close",on:{click:function(s){s.stopPropagation(),t.seeShow=!1}}}),t._v(" "),e("p",[t._v("选择要督办的任务")]),t._v(" "),t._l(t.seeShowList,(function(s,a){return e("div",[e("span",{staticClass:"seeBox_yuan"}),t._v(" "),e("span",{staticClass:"seeBox_span"},[t._v(t._s(s.node_name))]),t._v(" "),t._l(s.tasks,(function(s,a){return e("p",{staticClass:"seeBox_p"},[e("router-link",{attrs:{to:{path:"/matter/m_examine",query:{type:"oversee",inst_id:t.item_show.inst_id,task_id:s.task_id,changeStatus:t.status}}}},[t._v("\n\t\t\t\t\t\t\t"+t._s(s.user_name)+"\n\t\t\t\t\t\t")])],1)}))],2)}))],2)]):t._e()])},E=[],R=(e("e8d2"),{data:function(){return{visionData:[],processNum:0,finishNum:0,apps:[],status:0,loading:!1,scrollLock:!1,p:1,classNum:0,seeShow:!1,seeShowList:[],item_show:{},fudanMatter:!1}},created:function(){this.fudanMatter=!!this.$route.query.fudanMatter,this.getVisionData(),"oversee"==this.$route.query.page&&(this.status=this.$route.query.changeStatus)},methods:{toexamine:function(t,s){return 0==t.nodes.length?(this.$router.push({path:"/matter/m_examine",query:{type:"oversee",inst_id:t.inst_id,changeStatus:this.status,show:s}}),!1):1==t.nodes.length&&1==t.nodes[0].tasks.length?(this.$router.push({path:"/matter/m_examine",query:{type:"oversee",inst_id:t.inst_id,task_id:t.nodes[0].tasks[0].task_id,changeStatus:this.status,show:s}}),!1):(this.seeShowList=t.nodes,this.item_show=t,void(this.seeShow=!0))},getVisionData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this;this.loading=!0,this.appFetch({method:"get",url:"getMyOversee",data:Object(o["a"])({p:1,status:t,app_id:s},e)},(function(s){0==s.e&&(a.apps=s.d.apps,a.visionData=s.d.list,a.loading=!1,1==t&&(a.processNum=String(s.d.total).length<=2?s.d.total:"..."))}))},changeStatus:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.p=1,this.scrollLock=!1,$(".myMatters_scroll").scrollTop(0),this.status=t,this.getVisionData(t,null,s)},scrollPage:function(t){var s=parseInt($(t.target).scrollTop()+$(t.target).height())-$(".myMatters_visionList").height();if(s<=1&&s>=-1){if(this.scrollLock)return!1;this.scrollLock=!0,this.p++;var e=this;this.appFetch({method:"get",url:"getMyOversee",data:{status:this.status,p:this.p,app_id:this.classNum}},(function(t){var s;0==t.e&&(e.scrollLock=!1,t.d.list.length<20&&(e.scrollLock=!0),(s=e.visionData).push.apply(s,Object(w["a"])(t.d.list)))}))}},showAlert:function(){$(".vision_alert").toggle()},classify:function(t){if(t==this.classNum)return!1;this.p=1,this.scrollLock=!1,$(".myMatters_scroll").scrollTop(0),this.classNum=t,0==t?this.getVisionData(this.status):this.getVisionData(this.status,t),$(".vision_alert").hide()}},mixins:[A["a"],S["a"]]}),F=Object(o["a"])({name:"mOverseeList"},R),B=F,z=Object(p["a"])(B,O,E,!1,null,null,null),j=z.exports,U=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"myNotify_classify"},[e("ul",[e("li",{class:{active:0==t.status},on:{click:function(s){return t.changeStatus(0)}}},[t._v("\n\t\t\t\t\t全部\n\t\t\t\t")]),t._v(" "),e("li",{class:{active:1==t.status},on:{click:function(s){return t.changeStatus(1)}}},[t._v("\n\t\t\t\t\t进行中\n\t\t\t\t\t"),0!=t.processNum?e("span",[t._v(t._s(t.processNum))]):t._e()]),t._v(" "),e("li",{class:{active:2==t.status},on:{click:function(s){return t.changeStatus(2)}}},[t._v("\n\t\t\t\t\t已完成\n\t\t\t\t")])])]),t._v(" "),e("div",{staticClass:"myMatters_scroll",style:[t.mixMIndexHeigth],on:{scroll:function(s){return t.scrollPage(s)}}},[e("ul",{staticClass:"myMatters_notifyList"},t._l(t.notifyData,(function(s,a){return e("li",{key:a},[e("div",{staticClass:"m_matter_list_t"},[e("div",{staticClass:"title"},[e("p",["yes"==s.urgent?e("span",{staticClass:"urgent"},[t._v("紧急")]):t._e(),t._v("\n\t\t\t\t\t\t\t\t"+t._s(s.task_name?s.task_name:s.app_name)+"\n\t\t\t\t\t\t\t")]),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:0==s.status,expression:"item.status == 0"}]},[t._v(t._s(s.percent)+"%")])]),t._v(" "),e("p",{class:{hide:!s.task_name}},[t._v("服务："+t._s(s.app_name))]),t._v(" "),e("p",[t._v("发起人："+t._s(s.creator_name))]),t._v(" "),e("p",[t._v("提交于："+t._s(t.mixSetTime(s.created)))]),t._v(" "),0==s.status?e("p",[t._v("当前环节："),e("i",[t._v(t._s(s.nodes[0]&&s.nodes[0].node_name))])]):2==s.status?e("p",[t._v("办理结果："),e("i",{staticClass:"success"},[t._v("成功办理")])]):1==s.status?e("p",[t._v("办理结果："),e("i",{staticClass:"stop"},[t._v("终止办理")])]):t._e(),t._v(" "),e("p",[t._v("来自："+t._s(s.read_creator_name+" "+s.user_department))])]),t._v(" "),e("div",{staticClass:"m_matter_list_b"},[e("div",{staticClass:"m_matter_list_b_r"},[e("button",{on:{click:function(e){return t.toexamine(s,"showBpmn")}}},[t._v("流程跟踪")]),t._v(" "),e("button",{on:{click:function(e){return t.toexamine(s,"history")}}},[t._v("处理记录")]),t._v(" "),e("button",{class:(s.status,"see"),on:{click:function(e){return t.toexamine(s)}}},[t._v(t._s((s.status,"查看表单")))])])])])})),0),t._v(" "),0==t.notifyData.length?e("div",{staticClass:"myMatters_nodata"},[t._v("\n\t\t\t\t"+t._s(t.$t("system.noRead"))+"\n\t\t\t")]):t._e()])])},V=[],q={data:function(){return{matterHelper:T["a"],notifyData:[],status:1,processNum:0,finishNum:0,loading:!1,scrollLock:!1,p:1,fudanMatter:!1}},created:function(){this.fudanMatter=!!this.$route.query.fudanMatter,this.getNotifyData(),"read"==this.$route.query.page&&(this.status=this.$route.query.changeStatus)},methods:{toexamine:function(t,s){this.$router.push({path:"/matter/m_examine",query:{type:"read",inst_id:t.inst_id,changeStatus:this.status,show:s}})},getNotifyData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this;this.loading=!0,this.appFetch({method:"get",url:"getMyRead",data:Object(o["a"])({status:t,p:s},e)},(function(s){0==s.e&&(a.notifyData=s.d.list,a.loading=!1,1==t&&(a.processNum=String(s.d.total).length<=2?s.d.total:"..."))}))},changeStatus:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.p=1,this.scrollLock=!1,$(".myMatters_scroll").scrollTop(0),this.status=t,this.getNotifyData(t,this.p,s)},scrollPage:function(t){var s=parseInt($(t.target).scrollTop()+$(t.target).height())-$(".myMatters_notifyList").height();if(s<=1&&s>=-1){if(this.scrollLock)return!1;this.scrollLock=!0,this.p++;var e=this;this.appFetch({method:"get",url:"getMyRead",data:{status:this.status,p:this.p}},(function(t){var s;0==t.e&&(e.scrollLock=!1,t.d.list.length<20&&(e.scrollLock=!0),(s=e.notifyData).push.apply(s,Object(w["a"])(t.d.list)))}))}}},mixins:[A["a"],S["a"]]},P=Object(o["a"])({name:"mReadList"},q),H=P,K=Object(p["a"])(H,U,V,!1,null,null,null),G=K.exports,W=(e("b64b"),{data:function(){return{showRoute:"todo",fudanMatter:!1,launchAtodoC:{},showTodoTab:!1,showOverseeTab:!1,showReadTab:!1,showSearch:!1,searchData:{}}},created:function(){this.fudanMatter=!!this.$route.query.fudanMatter,this.showRoute=this.$route.query.page?this.$route.query.page:this.$route.query.fudanMatter?"launch":"todo",this.fudanMatter&&this.getLaunchAtodoC(),this.isTab()},computed:{active:function(){return[this.showTodoTab,this.showOverseeTab,this.showReadTab].filter((function(t){return t})).length<3}},methods:{search:function(){Object.keys(this.searchData).length&&this.showRoute==this.searchData.type&&this.$refs[this.showRoute].status==this.searchData.status||(this.searchData={type:this.showRoute,status:this.$refs[this.showRoute].status}),this.showSearch=!0},searchFn:function(t){var s=this;this.showSearch=!1,t.isSearch&&(this.showRoute=t.type,this.searchData=t,setTimeout((function(){s.$refs[t.type].changeStatus(t.status,t.parameData)}),0))},getLaunchAtodoC:function(){var t=this;this.appFetch({url:"launchAtodoC",method:"get"},(function(s){0==s.e?(s.d.unlaunch=String(s.d.unlaunch).length<=2?s.d.unlaunch:"...",s.d.untodo=String(s.d.untodo).length<=2?s.d.untodo:"...",t.launchAtodoC=s.d):t.$message(s.m)}))},isTab:function(){"todo"!=this.showRoute?this.showTodoTabF():this.showTodoTab=!0,"oversee"!=this.showRoute?this.showOverseeTabF():this.showOverseeTab=!0,"read"!=this.showRoute?this.showReadTabF():this.showReadTab=!0},showTodoTabF:function(){var t=this;this.appFetch({url:"getMyTodo",method:"get",data:{status:0,p:1,page_size:1}},(function(s){0==s.e&&(t.showTodoTab=!!s.d.total)}))},showOverseeTabF:function(){var t=this;this.appFetch({url:"getMyOversee",method:"get",data:{status:0,p:1,page_size:1}},(function(s){0==s.e&&(t.showOverseeTab=!!s.d.total)}))},showReadTabF:function(){var t=this;this.appFetch({url:"getMyRead",method:"get",data:{status:0,p:1,page_size:1}},(function(s){0==s.e&&(t.showReadTab=!!s.d.total)}))}}}),Q=(e("dbe3"),e("8cf7"),Object(o["a"])({name:"mMatter",components:{mFooter:n["t"],mLaunch:c["default"],mTodo:M,mOversee:j,mRead:G,mSearch:_}},W)),Z=Q,X=Object(p["a"])(Z,a,i,!1,null,null,null);s["default"]=X.exports},ade35:function(t,s,e){},b605:function(t,s,e){},dbe3:function(t,s,e){}}]);